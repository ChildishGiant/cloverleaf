"use strict";function getCookie(e){var t=("; "+document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()}function setCookie(e,t){document.cookie=e+"="+t+"; expires="+cookieCrumble.toGMTString()+"; path=/;"}function checkDebug(){if(debugMode){document.title+=" - Debug "+(new Date).getTime(),console.debug("Enabling debug css");var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href","debug.css"),document.getElementsByTagName("head")[0].appendChild(e),themeData.testTheme={accent:"#ff00ff",lightAccent:"#ff00ff",text:"#ff00ff",background:"#ff00ff",internal:"#ff00ff",incorrect:"#ff00ff",correct:"#ff00ff",inputColor:"#ff00ff",linkColor:"#ff00ff",highlightColor:"#ff00ff",underlineColor:"#ff00ff"};var t=document.createElement("option");t.onclick="changeTheme('testTheme')",t.id="testTheme",t.innerHTML="testTheme",document.querySelector("#options .input-field select").appendChild(t);var o="a[id=testTheme]{background-color: #ff00ff !important; border: 1px ;}a[id=testTheme] i {color: #ff00ff",n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=o:n.appendChild(document.createTextNode(o)),document.getElementsByTagName("head")[0].appendChild(n)}if("localhost"===location.hostname||"127.0.0.1"===location.hostname)document.title+=" - LocalHost";else if("dev.cloverleaf.app"===location.hostname){document.title+=" - Dev Build";var a=document.createElement("link");a.rel="shortcut icon",a.href="dev.ico",document.head.appendChild(a)}}function getQueryStrings(){var o={},n=function(e){return decodeURIComponent(e.replace(/\+/g," "))};return location.search.substring(1).split("&").forEach(function(e){var t=e.split("=");1<t.length&&(o[n(t[0])]=n(t[1]))}),o}function getRandomArbitrary(e,t){return Math.trunc(Math.random()*(t-e)+e)}function changeTheme(e){var t=e;if(""===e)t=defaultTheme;else{if(!themeData[e])throw new Error('Invalid theme  "'+e+'" ');setCookie("theme",t),document.documentElement.style.setProperty("--accentColor",themeData[t].accent),document.documentElement.style.setProperty("--lightAccent",themeData[t].lightAccent),document.documentElement.style.setProperty("--textColor",themeData[t].text),document.documentElement.style.setProperty("--backgroundColor",themeData[t].background),document.documentElement.style.setProperty("--internalColor",themeData[t].internal),document.documentElement.style.setProperty("--incorrectColor",themeData[t].incorrect),document.documentElement.style.setProperty("--correctColor",themeData[t].correct),document.documentElement.style.setProperty("--inputColor",themeData[t].inputColor),document.documentElement.style.setProperty("--linkColor",themeData[t].linkColor),document.documentElement.style.setProperty("--highlightColor",themeData[t].highlightColor),document.documentElement.style.setProperty("--underlineColor",themeData[t].underlineColor)}}function process(){var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",t=[],o=void 0,n=document.getElementById("app").value.trim(),a=document.getElementById("pass").value,l=Math.trunc(document.getElementById("length").value),s="";if(minLength<=l&&l<=maxLength)if(""!==n&&""!==a&&""!==l){if(jsonData[n]){if(console.debug("Found preset: "+n),jsonData[n].alias&&(n=jsonData[n].alias),"chars"in jsonData[n]&&(e=jsonData[n].chars),"regex"in jsonData[n])try{o=new RegExp(jsonData[n].regex)}catch(e){throw new Error("Invalid regex from "+n+' "'+jsonData[n].regex+'"')}if("requirements"in jsonData[n])for(var r=0;r<jsonData[n].requirements.length;r++)t.push(possibleRequirements[jsonData[n].requirements[r]])}for(console.debug("Started generating password"),"new"===mode?Math.seedrandom(keccak512(n.toLowerCase()+a)):Math.seedrandom(n.toLowerCase()+a);;){for(s="";s.length<l;)s+=e[Math.floor(Math.random()*e.length)];if(0===t.length&&!o)break;for(var d=!1,i=0;i<t.length;i++)for(var m=0;m<t[i].length&&-1===s.indexOf(t[i][m]);m++)if(t[i].indexOf(t[i][m])===t[i].length-1){d=!0;break}if(o&&(o.test(s)||(console.log(o.test(s),s),d=!0)),!d)break}document.getElementById("result").value=s}else document.getElementById("result").value="";else{if(maxLength<l)document.getElementById("length").value=maxLength;else{if(!(l<minLength))throw document.getElementById("length").value=16,new Error("This should never happen");document.getElementById("length").value=minLength}process()}}function setLogo(e){var t=void 0;switch(_typeof(jsonData[e].mini)){case"string":t=jsonData[e].mini;break;case"boolean":t=jsonData[e].mini?"logos/"+e+"-MINI.svg":jsonData[e].logo?jsonData[e].logo:"logos/"+e+".svg";break;case"undefined":t=jsonData[e].logo?jsonData[e].logo:"logos/"+e+".svg";break;default:throw new Error('Invalid mini value "'+_typeof(jsonData[e].mini)+'" for '+jsonData[e]+" preset")}document.getElementById("logoContainer").style.display="flex",document.getElementById("logo").src=t,document.getElementById("logo").alt=e,document.getElementById("logo").title=e}function colourUnderline(){if(document.getElementById("pass").value){Math.seedrandom(document.getElementById("pass").value);var e="HSL("+getRandomArbitrary(0,360)+", "+getRandomArbitrary(60,100)+"%, "+getRandomArbitrary(45,80)+"%)";document.getElementById("pass").style.setProperty("--underlineColor",e)}else document.getElementById("pass").removeAttribute("style")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},autoCompleteData={},jsonData={},defaultMinLength=4,defaultMaxLength=512,minLength=defaultMinLength,maxLength=defaultMaxLength,defaultTheme="Vanilla",themeData={},debugMode=!1,engineVersion="6.0.0",mode=void 0,date=new Date,cookieCrumble=new Date(date.getFullYear()+1,date.getMonth(),date.getDate()),possibleRequirements={cap:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",low:"abcdefghijklmnopqrstuvwxyz",num:"0123456789",special:"!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~"},targetLength=16,side=void 0,select=void 0;window.passwordToggle=function(){document.getElementById("passwordToggle").checked?document.getElementById("pass").type="password":document.getElementById("pass").type="text"},window.copy=function(){var e=document.getElementById("result").value;if(""===e)M.toast({html:"You have no password to copy.",displayLength:4e3,classes:"warning"});else{var t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("value",e),(t=document.body.appendChild(t)).select(),document.execCommand("copy"),t.remove(),M.toast({html:"Successfully copied!",displayLength:4e3,classes:"success"})}},window.resultToggle=function(){document.getElementById("resultToggle").checked?document.getElementById("result").type="password":document.getElementById("result").type="text"},window.setMode=function(e){setCookie("mode",mode=e),process()},window.onload=function(){void 0!==getCookie("cookieHidden")&&(document.getElementById("cookieAlert").style.display="none");var l=new XMLHttpRequest;l.onload=function(){jsonData=JSON.parse(l.response);var e=getQueryStrings();if(e.app){var t=String(e.app);if(jsonData[t]){var o=targetLength,n=jsonData[t].maxLength;n||(n=defaultMaxLength),jsonData[t].minLength<=o&&o<=n||(o=n),document.getElementById("length").value=o,process(),setLogo(t)}document.getElementById("app").value=t,document.querySelector("label[for='app']").classList.add("active")}for(var a in jsonData)jsonData[a].logo?autoCompleteData[a]=jsonData[a].logo:autoCompleteData[a]="logos/"+a+".svg";M.Autocomplete.init(document.getElementById("app"),{data:autoCompleteData,onAutocomplete:function(e){setLogo(e);var t=targetLength;jsonData[e].alias&&(e=jsonData[e].alias,console.debug("Using alias: "+e)),minLength=jsonData[e].minLength?jsonData[e].minLength:defaultMinLength,document.getElementById("length").min=minLength,maxLength=jsonData[e].maxLength?jsonData[e].maxLength:defaultMaxLength,document.getElementById("length").max=maxLength,minLength<=t&&t<=maxLength||(t=maxLength),document.getElementById("length").max=maxLength,process()},minLength:0,sortFunction:function(e,t,o){if(o){if(e.startsWith(o)&&!t.startsWith(o))return-1;if(!e.startsWith(o)&&t.startsWith(o))return 1}return e<t?-1:t<e?1:0}}),document.getElementById("app").focus()},l.open("get","data/sites.json",!0),l.send();var a=new XMLHttpRequest;a.onload=function(){for(var e in themeData=JSON.parse(a.response)){var t=document.createElement("option");t.onclick='changeTheme("'+e+'")',t.id=e,t.innerHTML=e,document.querySelector("#options .input-field select").appendChild(t);var o="a[id="+e+"]{background-color: "+themeData[e].background+" !important; border: 1px ;}a[id="+e+"] i {color: "+themeData[e].text,n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=o:n.appendChild(document.createTextNode(o)),document.getElementsByTagName("head")[0].appendChild(n)}void 0!==getCookie("theme")?(console.debug("Found a prefered theme. Loading "+getCookie("theme")),changeTheme(getCookie("theme")),document.getElementById("themeSelector").value=getCookie("theme")):changeTheme(document.getElementById("themeSelector").value=defaultTheme),side=M.Sidenav.init(document.querySelectorAll(".sidenav"),{edge:"left"})[0],checkDebug()},a.open("get","data/themes.json",!0),a.send(),void 0===getCookie("engineVersion")&&setCookie("engineVersion",engineVersion),void 0===getCookie("mode")?setCookie("mode",mode="5.10.0"!==getCookie("engineVersion")?"new":"old"):mode=getCookie("mode"),M.Tooltip.init(document.querySelectorAll(".tooltipped"));var e=M.Tabs.init(document.querySelectorAll(".tabs"))[0];if("new"!==mode&&"old"!==mode)throw new Error('Invalid mode  "'+mode+'" ');e.select(mode)},window.save=function(){document.getElementById("pass").value&&(setCookie("password",document.getElementById("pass").value),M.toast({html:"Password saved to your device!",displayLength:4e3,classes:"success"}))},window.load=function(){if(void 0!==getCookie("password")){var e=getCookie("password");document.querySelector("label[for='pass']").classList.add("active"),document.getElementById("pass").value=e,process(),M.toast({html:"Password loaded from your device!",displayLength:4e3,classes:"success"})}else M.toast({html:"You have no saved password to load.",displayLength:4e3,classes:"warning"});colourUnderline()},window.appInput=function(e){document.getElementById("logoContainer").style.display="none",document.getElementById("logo").removeAttribute("src"),document.getElementById("logo").removeAttribute("alt"),document.getElementById("logo").removeAttribute("title"),minLength=defaultMinLength,maxLength=defaultMaxLength,document.getElementById("length").max=maxLength,document.getElementById("length").min=minLength,document.getElementById("length").value=targetLength,process()},window.passwordUp=function(){colourUnderline(),process()},window.addEventListener("beforeinstallprompt",function(e){(window.installPromptEvent=e).preventDefault()}),window.appDown=function(e){("Enter"===e.key||"Enter"===e.code||13===e.keyCode)&&0<document.querySelector(".autocomplete-content.dropdown-content").offsetHeight&&null===document.querySelector(".autocomplete-content.dropdown-content .active")&&document.querySelector(".autocomplete-content.dropdown-content :first-child").click()};
//# sourceMappingURL=jssource.min.js.map