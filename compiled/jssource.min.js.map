{"version":3,"sources":["..\\jssource.js"],"names":["autoCompleteData","jsonData","defaultMinLength","defaultMaxLength","minLength","maxLength","defaultTheme","themeData","debugMode","engineVersion","mode","date","Date","cookieCrumble","getFullYear","getMonth","getDate","possibleRequirements","cap","low","num","special","targetLength","side","select","getCookie","name","value","document","cookie","parts","split","length","pop","shift","undefined","setCookie","toGMTString","checkDebug","title","getTime","console","debug","link","createElement","setAttribute","getElementsByTagName","appendChild","location","hostname","getQueryStrings","assoc","decode","s","decodeURIComponent","replace","queryString","search","substring","keyValues","forEach","key","product","window","passwordToggle","getElementById","checked","type","copy","pass","M","toast","html","displayLength","classes","copyElement","body","execCommand","remove","resultToggle","getRandomArbitrary","min","max","Math","trunc","random","changeTheme","passedTheme","usedTheme","Error","documentElement","style","setProperty","accent","lightAccent","text","background","internal","incorrect","correct","inputColor","linkColor","highlightColor","underlineColor","process","chars","requirements","appName","trim","masterPass","result","alias","i","push","seedrandom","keccak512","toLowerCase","floor","nope","j","c","indexOf","setMode","setTo","onload","display","sites","XMLHttpRequest","JSON","parse","response","qs","app","String","logo","src","alt","querySelector","classList","add","Autocomplete","init","data","onAutocomplete","val","sortFunction","a","b","inputString","startsWith","focus","open","send","themes","themeOption","onclick","id","innerHTML","css","styleSheet","cssText","createTextNode","Sidenav","querySelectorAll","edge","Tooltip","tabs","Tabs","save","exported","colourUnderline","colour","removeAttribute","load","password","appInput","e","passwordUp","addEventListener","installPromptEvent","preventDefault","appDown","code","keyCode","offsetHeight","click"],"mappings":"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","sourcesContent":["/* global M, location, XMLHttpRequest, keccak512 */\r\nconst autoCompleteData = {}; // Here for scope perposes\r\nlet jsonData = {}; // As am I.\r\nconst defaultMinLength = 4; // We\r\nconst defaultMaxLength = 512; // All\r\nlet minLength = defaultMinLength; // Are,\r\nlet maxLength = defaultMaxLength; // Really\r\nconst defaultTheme = \"Vanilla\";\r\nlet themeData = {};\r\nconst debugMode = false;\r\nconst engineVersion = \"6.0.0\"; // Changed if breaking changes are made to the engine\r\nlet mode;\r\nconst date = new Date();\r\nconst cookieCrumble = new Date(date.getFullYear() + 1, date.getMonth(), date.getDate()); // Make a date 1 year into THE FUTURE\r\nconst possibleRequirements = {\r\n\tcap: \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\",\r\n\tlow: \"abcdefghijklmnopqrstuvwxyz\",\r\n\tnum: \"0123456789\",\r\n\tspecial: \"!\\\"#$%&'()*+,-./:;<=>?@[\\\\]^_`{|}~\"\r\n};\r\nconst targetLength = 16;\r\nlet side; // Side nav\r\nlet select; // Theme selector\r\n\r\n/**\r\n * Gets a cookie\r\n * @param  {string} name - The name of the cookie to retrive\r\n * @returns {(string|undefined)} - Value of the cookie | If there is no cookie, undefined\r\n */\r\nfunction getCookie(name) {\r\n\tconst value = `; ${document.cookie}`;\r\n\tconst parts = value.split(`; ${name}=`);\r\n\tif (parts.length === 2) {\r\n\t\treturn parts.pop().split(\";\").shift();\r\n\t}\r\n\treturn undefined;\r\n}\r\n\r\n/**\r\n * Sets a cookie to a certain value\r\n * @param  {string} name - The name of the cookie to set\r\n * @param  {string} value -  The value to set that cookie to\r\n * @returns {void}\r\n */\r\nfunction setCookie(name, value) {\r\n\tdocument.cookie = `${name}=${value}; expires=${cookieCrumble.toGMTString()}; path=/;`; // Set cookie to expire in 1 year\r\n}\r\n\r\nfunction checkDebug() {\r\n\tif (debugMode) {\r\n\t\tdocument.title += ` - Debug ${new Date().getTime()}`;\r\n\t\tconsole.debug(\"Enabling debug css\");\r\n\t\tconst link = document.createElement(\"link\");\r\n\t\tlink.setAttribute(\"rel\", \"stylesheet\");\r\n\t\tlink.setAttribute(\"type\", \"text/css\");\r\n\t\tlink.setAttribute(\"href\", \"debug.css\");\r\n\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(link);\r\n\t}\r\n\r\n\t// If I'm testing, change the page title so I can tell the tabs apart\r\n\tif (location.hostname === \"localhost\" || location.hostname === \"127.0.0.1\") {\r\n\t\tdocument.title += \" - LocalHost\";\r\n\t}\r\n}\r\n\r\nfunction getQueryStrings() {\r\n\tconst assoc = {};\r\n\tconst decode = function (s) {\r\n\t\treturn decodeURIComponent(s.replace(/\\+/g, \" \"));\r\n\t};\r\n\tconst queryString = location.search.substring(1);\r\n\tconst keyValues = queryString.split(\"&\");\r\n\r\n\tkeyValues.forEach(product => {\r\n\t\tconst key = product.split(\"=\");\r\n\t\tif (key.length > 1) {\r\n\t\t\tassoc[decode(key[0])] = decode(key[1]);\r\n\t\t}\r\n\t});\r\n\r\n\treturn assoc;\r\n}\r\n\r\n// For showing / hiding the master password\r\nwindow.passwordToggle = function () {\r\n\t// If the switch is on / to the right / \"Hide\"\r\n\tif (document.getElementById(\"passwordToggle\").checked) {\r\n\t\t// Make the password field use blobs\r\n\t\tdocument.getElementById(\"pass\").type = \"password\";\r\n\t} else {\r\n\t\t// If it's off\r\n\t\t// Make the password field use actual text so you can see/copy it.\r\n\t\tdocument.getElementById(\"pass\").type = \"text\";\r\n\t}\r\n};\r\n\r\nwindow.copy = function () {\r\n\r\n\tconst pass = document.getElementById(\"result\").value;\r\n\r\n\tif (pass === \"\") {\r\n\t\tM.toast({\r\n\t\t\thtml: \"You have no password to copy.\",\r\n\t\t\tdisplayLength: 4000,\r\n\t\t\tclasses: \"warning\"\r\n\t\t});\r\n\t} else {\r\n\r\n\t\tlet copyElement = document.createElement(\"input\");\r\n\t\tcopyElement.setAttribute(\"type\", \"text\");\r\n\t\tcopyElement.setAttribute(\"value\", pass);\r\n\t\tcopyElement = document.body.appendChild(copyElement);\r\n\t\tcopyElement.select();\r\n\t\tdocument.execCommand(\"copy\");\r\n\t\tcopyElement.remove();\r\n\r\n\t\tM.toast({\r\n\t\t\thtml: \"Successfully copied!\",\r\n\t\t\tdisplayLength: 4000,\r\n\t\t\tclasses: \"success\"\r\n\t\t});\r\n\t}\r\n\r\n};\r\n\r\n// For showing / hiding the generated password\r\nwindow.resultToggle = function () {\r\n\t// If the switch is on / to the right / \"Hide\"\r\n\tif (document.getElementById(\"resultToggle\").checked) {\r\n\t\t// Make the password field use blobs\r\n\t\tdocument.getElementById(\"result\").type = \"password\";\r\n\t} else {\r\n\t\t// If it's off\r\n\t\t// Make the password field use actual text so you can see/copy it.\r\n\t\tdocument.getElementById(\"result\").type = \"text\";\r\n\t}\r\n};\r\n\r\n/**\r\n * A random int between two values\r\n * @param  {Number} min - Lowest value possible, inclusive\r\n * @param  {Number} max - Highest value possible, exclusive\r\n */\r\nfunction getRandomArbitrary(min, max) {\r\n\treturn Math.trunc(Math.random() * (max - min) + min);\r\n}\r\n\r\nfunction changeTheme(passedTheme) {\r\n\tlet usedTheme = passedTheme;\r\n\tif (passedTheme === \"\") {\r\n\t\tusedTheme = defaultTheme;\r\n\t} else if (!themeData[passedTheme]) {\r\n\t\tthrow new Error(`Invalid theme  \"${passedTheme}\" `);\r\n\t} else {\r\n\t\tsetCookie(\"theme\", usedTheme);\r\n\r\n\t\tdocument.documentElement.style.setProperty(\"--accentColor\", themeData[usedTheme].accent);\r\n\t\tdocument.documentElement.style.setProperty(\"--lightAccent\", themeData[usedTheme].lightAccent);\r\n\t\tdocument.documentElement.style.setProperty(\"--textColor\", themeData[usedTheme].text);\r\n\t\tdocument.documentElement.style.setProperty(\"--backgroundColor\", themeData[usedTheme].background);\r\n\t\tdocument.documentElement.style.setProperty(\"--internalColor\", themeData[usedTheme].internal);\r\n\t\tdocument.documentElement.style.setProperty(\"--incorrectColor\", themeData[usedTheme].incorrect);\r\n\t\tdocument.documentElement.style.setProperty(\"--correctColor\", themeData[usedTheme].correct);\r\n\t\tdocument.documentElement.style.setProperty(\"--inputColor\", themeData[usedTheme].inputColor);\r\n\t\tdocument.documentElement.style.setProperty(\"--linkColor\", themeData[usedTheme].linkColor);\r\n\t\tdocument.documentElement.style.setProperty(\"--highlightColor\", themeData[usedTheme].highlightColor);\r\n\t\tdocument.documentElement.style.setProperty(\"--underlineColor\", themeData[usedTheme].underlineColor);\r\n\t}\r\n}\r\n\r\n// Take inputs and display a password. (The black box)\r\nfunction process() {\r\n\tlet chars = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!\\\"#$%&'()*+,-./:;<=>?@[\\\\]^_`{|}~\"; // Defualt character set (Set here but overwritten if there's a custom one.)\r\n\tconst requirements = []; // By default we have no requirements but reset it so we don't carry them over\r\n\tlet appName = document.getElementById(\"app\").value.trim();\r\n\tconst masterPass = document.getElementById(\"pass\").value;\r\n\tconst length = Math.trunc(document.getElementById(\"length\").value); // Get the desired length of a password and make sure it's an integer\r\n\tlet result = \"\"; // Has to be here, not in the loop for scope purposes\r\n\r\n\tif (!(minLength <= length && length <= maxLength)) {\r\n\t\t// if the length is invalid\r\n\t\tif (length > maxLength) {\r\n\t\t\t// Too long\r\n\t\t\tdocument.getElementById(\"length\").value = maxLength;\r\n\t\t} else if (length < minLength) {\r\n\t\t\t// Too short\r\n\t\t\tdocument.getElementById(\"length\").value = minLength;\r\n\t\t} else {\r\n\t\t\t// Should never be triggered but better safe than sorry\r\n\t\t\tdocument.getElementById(\"length\").value = 16;\r\n\t\t\tthrow new Error(\"This should never happen\");\r\n\t\t}\r\n\r\n\t\t// Now we have a sensible value, restart the process\r\n\t\tprocess();\r\n\t\treturn;\r\n\t}\r\n\r\n\t// If the appname or password or length are empty\r\n\tif (appName === \"\" || masterPass === \"\" || length === \"\") {\r\n\t\t// Empty the output field\r\n\t\tdocument.getElementById(\"result\").value = \"\";\r\n\t\t// Stop function from generating new password\r\n\t\treturn;\r\n\t}\r\n\r\n\t// It's a valid attempt, continue\r\n\r\n\tif (jsonData[appName]) {\r\n\t\t// If it's a site with a preset\r\n\t\tconsole.debug(`Found preset: ${appName}`);\r\n\r\n\t\t// If it's an alias for another app\r\n\t\tif (jsonData[appName].alias) {\r\n\t\t\t// Change the name of the app we're using to its alias\r\n\t\t\tappName = jsonData[appName].alias;\r\n\t\t}\r\n\r\n\t\t// If it has a custom character set\r\n\t\tif (\"chars\" in jsonData[appName]) {\r\n\t\t\t// Replace the default character set with the supplied one.\r\n\t\t\tchars = jsonData[appName].chars;\r\n\t\t}\r\n\r\n\t\tif (\"requirements\" in jsonData[appName]) {\r\n\t\t\tfor (let i = 0; i < jsonData[appName].requirements.length; i++) {\r\n\t\t\t\trequirements.push(\r\n\t\t\t\t\tpossibleRequirements[jsonData[appName].requirements[i]]\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconsole.debug(\"Started generating password\");\r\n\r\n\t// Set the generation seed\r\n\tif (mode === \"new\") {\r\n\t\tMath.seedrandom(keccak512(appName.toLowerCase() + masterPass));\r\n\t} else {\r\n\t\tMath.seedrandom(appName.toLowerCase() + masterPass);\r\n\t}\r\n\r\n\t// password generation cycle\r\n\twhile (true) {\r\n\t\tresult = \"\";\r\n\t\twhile (result.length < length) {\r\n\t\t\t// Add one seeded random character at a time\r\n\t\t\tresult += chars[Math.floor(Math.random() * chars.length)];\r\n\t\t}\r\n\r\n\t\t// If there's requirements to forfill\r\n\t\tif (requirements !== []) {\r\n\t\t\tlet nope = false;\r\n\t\t\tfor (let j = 0; j < requirements.length; j++) {\r\n\t\t\t\t// For each requirement\r\n\t\t\t\tfor (let c = 0; c < requirements[j].length; c++) {\r\n\t\t\t\t\t// For each character in the requirement group\r\n\t\t\t\t\tif (result.indexOf(requirements[j][c]) !== -1) {\r\n\t\t\t\t\t\t// If that character is in the password\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\trequirements[j].indexOf(requirements[j][c]) === requirements[j].length - 1\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tnope = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!nope) {\r\n\t\t\t\t// If all tests passed\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// no requirements\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// The password has been generated\r\n\r\n\t// Display password\r\n\tdocument.getElementById(\"result\").value = result;\r\n}\r\n\r\n/**\r\n * Changes the mode to either\r\n * @param  {string} setTo - Either \"old\" or \"new\", \"old\" being legacy mode and \"new\" being suggested mode\r\n * @returns {void}\r\n */\r\nwindow.setMode = function (setTo) {\r\n\tmode = setTo;\r\n\tsetCookie(\"mode\", setTo);\r\n\tprocess();\r\n};\r\n\r\n/**\r\n * On page load\r\n */\r\nwindow.onload = function () {\r\n\tif (getCookie(\"cookieHidden\") !== undefined) {\r\n\t\tdocument.getElementById(\"cookieAlert\").style.display = \"none\";\r\n\t}\r\n\r\n\t// Process the sites.json for the autocomplete structure\r\n\tconst sites = new XMLHttpRequest();\r\n\tsites.onload = function () {\r\n\t\tjsonData = JSON.parse(sites.response);\r\n\r\n\t\tconst qs = getQueryStrings();\r\n\r\n\t\tif (qs.app) {\r\n\t\t\tconst appName = String(qs.app);\r\n\t\t\t// If it's a preset\r\n\t\t\tif (jsonData[appName]) {\r\n\t\t\t\tlet length = targetLength;\r\n\t\t\t\tlet max = jsonData[appName].maxLength;\r\n\r\n\t\t\t\tif (!max) {\r\n\t\t\t\t\tmax = defaultMaxLength;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!(jsonData[appName].minLength <= length && length <= max)) {\r\n\t\t\t\t\tlength = max;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdocument.getElementById(\"length\").value = length;\r\n\r\n\t\t\t\t// In case there's already a password (eg switching sites / presets) regen password\r\n\t\t\t\tprocess();\r\n\r\n\t\t\t\tlet logo;\r\n\r\n\t\t\t\tif (jsonData[appName].logo) {\r\n\t\t\t\t\tlogo = jsonData[appName].logo;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlogo = `logos/${appName}.svg`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set image\r\n\t\t\t\tdocument.getElementById(\"logoContainer\").style.display = \"flex\";\r\n\t\t\t\tdocument.getElementById(\"logo\").src = logo;\r\n\t\t\t\tdocument.getElementById(\"logo\").alt = appName;\r\n\t\t\t\tdocument.getElementById(\"logo\").title = appName;\r\n\t\t\t}\r\n\t\t\t// Set the app name\r\n\t\t\tdocument.getElementById(\"app\").value = appName;\r\n\r\n\t\t\tdocument.querySelector(\"label[for='app']\").classList.add(\"active\");\r\n\t\t}\r\n\r\n\t\tfor (const key in jsonData) {\r\n\t\t\t// If the preset has a custom logo url\r\n\t\t\tif (jsonData[key].logo) {\r\n\t\t\t\tautoCompleteData[key] = jsonData[key].logo;\r\n\t\t\t} else {\r\n\t\t\t\t// Set the logo url to the default\r\n\t\t\t\tautoCompleteData[key] = `logos/${key}.svg`;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Setup possible autocomplete sites\r\n\t\tM.Autocomplete.init(document.getElementById(\"app\"), {\r\n\t\t\tdata: autoCompleteData,\r\n\r\n\t\t\t// called when an autocomplete is used.\r\n\t\t\tonAutocomplete(val) {\r\n\t\t\t\t// Set image\r\n\t\t\t\tdocument.getElementById(\"logoContainer\").style.display = \"flex\";\r\n\t\t\t\tdocument.getElementById(\"logo\").src = autoCompleteData[val];\r\n\t\t\t\tdocument.getElementById(\"logo\").alt = val;\r\n\t\t\t\tdocument.getElementById(\"logo\").title = val;\r\n\t\t\t\tlet length = targetLength;\r\n\r\n\t\t\t\t// If it's an alias for another app\r\n\t\t\t\tif (jsonData[val].alias) {\r\n\t\t\t\t\t// Change the name of the app we're using to its alias\r\n\t\t\t\t\tval = jsonData[val].alias;\r\n\t\t\t\t\tconsole.debug(`Using alias: ${val}`);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (jsonData[val].minLength) {\r\n\t\t\t\t\tminLength = jsonData[val].minLength;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tminLength = defaultMinLength;\r\n\t\t\t\t}\r\n\t\t\t\tdocument.getElementById(\"length\").min = minLength;\r\n\r\n\t\t\t\tif (jsonData[val].maxLength) {\r\n\t\t\t\t\tmaxLength = jsonData[val].maxLength;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmaxLength = defaultMaxLength;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdocument.getElementById(\"length\").max = maxLength;\r\n\r\n\t\t\t\tif (!(minLength <= length && length <= maxLength)) {\r\n\t\t\t\t\tlength = maxLength;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdocument.getElementById(\"length\").max = maxLength;\r\n\r\n\t\t\t\t// In case there's already a password (eg switching sites / presets) regen password\r\n\t\t\t\tprocess();\r\n\t\t\t},\r\n\t\t\t// Minimum number of characters typed for the dialog to open\r\n\t\t\tminLength: 0,\r\n\t\t\t// For deciding the order of options.\r\n\t\t\tsortFunction(a, b, inputString) {\r\n\t\t\t\t// inputString will always be in both a and b if present\r\n\r\n\t\t\t\t// if there's a given inputString\r\n\t\t\t\tif (inputString) {\r\n\t\t\t\t\t// If only \"a\" starts with inputString\r\n\t\t\t\t\tif (a.startsWith(inputString) && !b.startsWith(inputString)) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// If only \"b\" starts with inputString\r\n\t\t\t\t\tif (!a.startsWith(inputString) && b.startsWith(inputString)) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// If both \"a\" and \"b\" start with inputString we do the same as always so\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a < b) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\t// No need for else if as if the prior condition was true, we'd return so wouldn't run this line\r\n\t\t\t\tif (a > b) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\t// a must be equal to b\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Autocomplete has been setup\r\n\t\t// Move the cursor to the app field\r\n\t\tdocument.getElementById(\"app\").focus();\r\n\t};\r\n\tsites.open(\"get\", \"data/sites.json\", true);\r\n\tsites.send();\r\n\r\n\t// Process the sites.json for the autocomplete structure\r\n\tconst themes = new XMLHttpRequest();\r\n\tthemes.onload = function () {\r\n\t\tthemeData = JSON.parse(themes.response);\r\n\r\n\t\tfor (const key in themeData) {\r\n\r\n\t\t\t// Add select option for the theme\r\n\t\t\tconst themeOption = document.createElement(\"option\");\r\n\t\t\tthemeOption.onclick = `changeTheme(\"${key}\")`;\r\n\t\t\tthemeOption.id = key;\r\n\t\t\tthemeOption.innerHTML = key;\r\n\t\t\tdocument.querySelector(\"#options .input-field select\").appendChild(themeOption);\r\n\r\n\t\t\tconst css = `a[id=${key}]{background-color: ${\r\n\t\t\t\tthemeData[key].background\r\n\t\t\t} !important; border: 1px ;}a[id=${key}] i {color: ${themeData[key].text}`;\r\n\t\t\tconst style = document.createElement(\"style\");\r\n\t\t\tstyle.type = \"text/css\";\r\n\t\t\tif (style.styleSheet) {\r\n\t\t\t\t// This is required for IE8 and below.\r\n\t\t\t\tstyle.styleSheet.cssText = css;\r\n\t\t\t} else {\r\n\t\t\t\tstyle.appendChild(document.createTextNode(css));\r\n\t\t\t}\r\n\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(style);\r\n\t\t}\r\n\r\n\t\t// If the user has a prefered theme\r\n\t\tif (getCookie(\"theme\") !== undefined) {\r\n\t\t\tconsole.debug(`Found a prefered theme. Loading ${getCookie(\"theme\")}`);\r\n\r\n\t\t\tchangeTheme(getCookie(\"theme\"));\r\n\t\t\t// Select the correct selection\r\n\t\t\tdocument.getElementById(\"themeSelector\").value = getCookie(\"theme\");\r\n\t\t} else {\r\n\t\t\t// If no theme cookie exists\r\n\t\t\t// Click the vanilla theme.\r\n\t\t\tdocument.getElementById(\"themeSelector\").value = defaultTheme;\r\n\t\t\tchangeTheme(defaultTheme);\r\n\t\t}\r\n\r\n\t\t// Initialise the side nav\r\n\t\tside = M.Sidenav.init(document.querySelectorAll(\".sidenav\"), { edge: \"left\" })[0];\r\n\t\t// Initalise the theme selection\r\n\t\t// Or not since materialize styled select is terrible.\r\n\t\t// select = M.FormSelect.init(document.querySelectorAll(\"select\"))[0];\r\n\r\n\t};\r\n\r\n\tthemes.open(\"get\", \"data/themes.json\", true);\r\n\tthemes.send();\r\n\r\n\t// Set the engine version cookie if we haven't before\r\n\tif (getCookie(\"engineVersion\") === undefined) {\r\n\t\tsetCookie(\"engineVersion\", engineVersion);\r\n\t}\r\n\r\n\t// Set the mode cookie if we haven't before\r\n\tif (getCookie(\"mode\") === undefined) {\r\n\t\tif (getCookie(\"engineVersion\") !== \"5.10.0\") {\r\n\t\t\tmode = \"new\";\r\n\t\t} else {\r\n\t\t\tmode = \"old\";\r\n\t\t}\r\n\t\tsetCookie(\"mode\", mode);\r\n\t} else {\r\n\t\tmode = getCookie(\"mode\");\r\n\t}\r\n\r\n\t// Initialize tooltips\r\n\tM.Tooltip.init(document.querySelectorAll(\".tooltipped\"));\r\n\t// Initialize the tabs\r\n\tconst tabs = M.Tabs.init(document.querySelectorAll(\".tabs\"))[0];\r\n\r\n\tif (mode === \"new\" || mode === \"old\") {\r\n\t\ttabs.select(mode);\r\n\t} else {\r\n\t\tthrow new Error(`Invalid mode  \"${mode}\" `); // Using the inferior kind of quotes so I may see the superior ones apon error\r\n\t}\r\n\r\n\tcheckDebug();\r\n};\r\n\r\n/**\r\n * Save the current master password as a cookie\r\n */\r\nwindow.save = function exported() {\r\n\tif (document.getElementById(\"pass\").value) {\r\n\t\t// If there's a password\r\n\t\tsetCookie(\"password\", document.getElementById(\"pass\").value);\r\n\t\tM.toast({\r\n\t\t\thtml: \"Password saved to your device!\",\r\n\t\t\tdisplayLength: 4000,\r\n\t\t\tclasses: \"success\"\r\n\t\t});\r\n\t}\r\n};\r\n\r\n/**\r\n * Use the current password as a seed to colour the underline of the field\r\n */\r\nfunction colourUnderline() {\r\n\t// If there's a password\r\n\tif (document.getElementById(\"pass\").value) {\r\n\t\t// Seed the\r\n\t\tMath.seedrandom(document.getElementById(\"pass\").value);\r\n\t\tconst colour = `HSL(${getRandomArbitrary(0, 360)}, ${getRandomArbitrary(\r\n\t\t\t60,\r\n\t\t\t100\r\n\t\t)}%, ${getRandomArbitrary(45, 80)}%)`;\r\n\t\tdocument\r\n\t\t\t.getElementById(\"pass\")\r\n\t\t\t.style.setProperty(\"--underlineColor\", colour);\r\n\t} else {\r\n\t\t// If there's no password, reset the underline colour\r\n\t\tdocument.getElementById(\"pass\").removeAttribute(\"style\");\r\n\t}\r\n}\r\n\r\nwindow.load = function () {\r\n\t// Load the saved password from cookie\r\n\tif (getCookie(\"password\") !== undefined) {\r\n\t\tconst password = getCookie(\"password\"); // Get the password from the cookie\r\n\t\tdocument.querySelector(\"label[for='pass']\").classList.add(\"active\"); // Raise the text on the input\r\n\t\tdocument.getElementById(\"pass\").value = password; // Fill the password input with the correct password\r\n\t\tprocess();\r\n\t\tM.toast({\r\n\t\t\thtml: \"Password loaded from your device!\",\r\n\t\t\tdisplayLength: 4000,\r\n\t\t\tclasses: \"success\"\r\n\t\t});\r\n\t} else {\r\n\t\tM.toast({\r\n\t\t\thtml: \"You have no saved password to load.\",\r\n\t\t\tdisplayLength: 4000,\r\n\t\t\tclasses: \"warning\"\r\n\t\t});\r\n\t}\r\n\r\n\tcolourUnderline();\r\n};\r\n\r\nwindow.appInput = function (e) {\r\n\t// Clear logo\r\n\tdocument.getElementById(\"logoContainer\").style.display = \"none\";\r\n\tdocument.getElementById(\"logo\").removeAttribute(\"src\");\r\n\tdocument.getElementById(\"logo\").removeAttribute(\"alt\");\r\n\tdocument.getElementById(\"logo\").removeAttribute(\"title\");\r\n\r\n\t// Reset the mins and maxes for length\r\n\tminLength = defaultMinLength;\r\n\tmaxLength = defaultMaxLength;\r\n\tdocument.getElementById(\"length\").max = maxLength;\r\n\tdocument.getElementById(\"length\").min = minLength;\r\n\r\n\tdocument.getElementById(\"length\").value = targetLength;\r\n\r\n\tprocess();\r\n};\r\n\r\nwindow.passwordUp = function () {\r\n\tcolourUnderline();\r\n\r\n\t// Regen the password\r\n\tprocess();\r\n};\r\n\r\nwindow.addEventListener(\"beforeinstallprompt\", e => {\r\n\twindow.installPromptEvent = e;\r\n\t// Prevent Chrome 67 and earlier from automatically showing the prompt\r\n\te.preventDefault();\r\n\t// Show the prompt on later versions\r\n});\r\n\r\nwindow.appDown = function (e) {\r\n\r\n\t// Enter pressed and dropdown visible\r\n\tif (\r\n\t\t(e.key === \"Enter\" || e.code === \"Enter\" || e.keyCode === 13) &&\r\n\t\tdocument.querySelector(\".autocomplete-content.dropdown-content\").offsetHeight > 0\r\n\t) {\r\n\r\n\t\t// If no entry is selected\r\n\t\tif (document.querySelector(\".autocomplete-content.dropdown-content .active\") === null) {\r\n\t\t\tdocument.querySelector(\".autocomplete-content.dropdown-content :first-child\").click();\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n"]}